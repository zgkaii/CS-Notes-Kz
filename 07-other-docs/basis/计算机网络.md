# 一、概述
计算机网络，即是一些相互连接、自治的计算机的集合。网络把许多计算机连接在一起，而因特网则把许多网络连接在一起。而网络协议即是为进行网络中数据交换建立的规则与标准。

网络协议主要由以下三个要素组成：
(1) 语法，即数据与控制信息的结构或格式；
(2) 语义，即需要发出何种控制信息，完成何种动作以及做出何种响应；
(3) 同步，即事件实现顺序的详细说明。

计算机网络协议结构：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152125812.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)

(1) 应用层(application layer)：通过应用进程间的交互来完成特定网络应用。
(2) 运输层(transport layer)：为两个主机中进程之间的通信提供通用的数据传输服务。
(3) 网络层(network layer)：为分组交换网上的不同主机提供通信服务。
(4) 数据链路层(data link layer)：将比特组装成帧和点到点的传递（帧Frame）
(5) 物理层(physical layer):通过媒介传输比特,确定机械及电气规范（比特Bit）

数据在各层之间的传递过程：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152027729.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)

TCP/IP层次结构：

![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152050468.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)
### 二、物理层
物理层的主要任务就是确定与传输媒体的接口有关的一些特性，如机械特性、电气特性、功能特性和过程特性。

### 三、数据链路层
数据链路层属于计算机网络的低层。
（1）点对点通信（2）广播通信

链路(link)就是从一个结点到相邻结点的一段物理线路（有线或无线）。

数据链路(data link)一些必要的通信协议来控制这些数据的传输，这些协议的硬件和软件加到链路上，就构成了数据链路。

链路是从一个结点到相邻结点的一段物理线路，数据链路则是在链路的基础上增加了一些必要的硬件（如网络适配器）和软件（如协议的实现）。

点对点协议PPP
广播信道CSMA/CD协议
### 四、网络层
从一般的概念来讲，将网络互相连接起来要使用一些中间设备。根据中间设备所在的层次，可以有以下四种不同的中间设备：
(1) 物理层使用的中间设备叫做转发器(repeater)。
(2) 数据链路层使用的中间设备叫做网桥或桥接器(bridge)。
(3) 网络层使用的中间设备叫做路由器(router)。
(4) 在网络层以上使用的中间设备叫做网关(gateway)。用网关连接两个不兼容的系统需要在高层进行协议的转换。

IP地址就是给因特网上的每一个主机（或路由器）的每一个接口分配一个在全世界范围是唯一的32位的标识符。一个IP地址在整个因特网内时唯一的。IP地址不仅仅指明了一个主机，还指明了主机所连接的网络。

![在这里插入图片描述](https://img-blog.csdnimg.cn/2020080415085715.png#pic_center)

（1）地址解析协议ARP:根据IP地址获取物理地址的一个TCP/IP协议。每一个主机都设有一个ARP高速缓存(ARP cache)，里面有本局域网上的各主机和路由器的IP地址到硬件地址的映射表。
（2）当源主机要发送数据时，首先检查ARP列表中是否有对应IP地址的目的主机的MAC地址，如果有，则直接发送数据，如果没有，就向本网段的所有主机发送ARP数据包，该数据包包括的内容有：源主机 IP地址，源主机MAC地址，目的主机的IP 地址
（3）当本网络的所有主机收到该ARP数据包时，首先检查数据包中的IP地址是否是自己的IP地址，如果不是，则忽略该数据包，如果是，则首先从数据包中取出源主机的IP和MAC地址写入到ARP列表中，如果已经存在，则覆盖，然后将自己的MAC地址写入ARP响应包中，告诉源主机自己是它想要找的MAC地址。
（4）源主机收到ARP响应包后。将目的主机的IP和MAC地址写入ARP列表，并利用此信息发送数据。如果源主机一直没有收到ARP响应数据包，表示ARP查询失败。
### 五、传输层
###### （1）UDP协议：　
<font color="red" size="4" >UDP用户数据报协议，是面向无连接的通讯协议，UDP数据包括目的端口号和源端口号信息，由于通讯不需要连接，所以可以实现广播发送。</font>UDP通讯时不需要接收方确认，属于不可靠的传输，可能会出现丢包现象，实际应用中要求程序员编程验证。　　
UDP与TCP位于同一层，但它不管数据包的顺序、错误或重发。因此，UDP不被应用于那些使用虚电路的面向连接的服务，UDP主要用于那些面向查询---应答的服务，例如NFS。相对于FTP或Telnet，这些服务需要交换的信息量较小。　　
每个UDP报文分UDP报头和UDP数据区两部分。报头由四个16位长（2字节）字段组成，分别说明该报文的源端口、目的端口、报文长度以及校验值。UDP报头由4个域组成，其中每个域各占用2个字节，具体如下：　　
（1）源端口号；    
（2）目标端口号；  
（3）数据报长度；  
（4）校验值。  
  　　
使用UDP协议包括：TFTP（简单文件传输协议）、SNMP（简单网络管理协议）、DNS（域名解析协议）、NFS、BOOTP。  
　　
<font color="red" size="4" >TCP 与 UDP 的区别：TCP是面向连接的，可靠的字节流服务；UDP是面向无连接的，不可靠的数据报服务。</font>

###### （2）TCP/IP协议：
<font color="red" size="4" >TCP/IP协议是Internet最基本的协议、Internet国际互联网络的基础，由网络层的IP协议和传输层的TCP协议组成。通俗而言：TCP负责发现传输的问题，一有问题就发出信号，要求重新传输，直到所有数据安全正确地传输到目的地。而IP是给因特网的每一台联网设备规定一个地址。</font>　

IP层接收由更低层（网络接口层例如以太网设备驱动程序）发来的数据包，并把该数据包发送到更高层---TCP或UDP层；相反，IP层也把从TCP或UDP层接收来的数据包传送到更低层。IP数据包是不可靠的，因为IP并没有做任何事情来确认数据包是否按顺序发送的或者有没有被破坏，IP数据包中含有发送它的主机的地址（源地址）和接收它的主机的地址（目的地址）。
 　　
TCP是面向连接的通信协议，通过三次握手建立连接，通讯完成时要拆除连接，由于TCP是面向连接的所以只能用于端到端的通讯。TCP提供的是一种可靠的数据流服务，采用“带重传的肯定确认”技术来实现传输的可靠性。TCP还采用一种称为“滑动窗口”的方式进行流量控制，所谓窗口实际表示接收能力，用以限制发送方的发送速度。

TCP报文首部格式：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152505906.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)

TCP协议的三次握手和四次挥手：  
三次握手建立连接：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152530928.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)

四次挥手释放连接：  
![在这里插入图片描述](https://img-blog.csdnimg.cn/20200804152548491.png?x-oss-process=image/watermark,type_ZmFuZ3poZW5naGVpdGk,shadow_10,text_aHR0cHM6Ly9ibG9nLmNzZG4ubmV0L0tBSVpfTEVBUk4=,size_16,color_FFFFFF,t_70)

注：seq:"sequance"序列号；ack:"acknowledge"确认号；SYN:"synchronize"请求同步标志；；ACK:"acknowledge"确认标志"；FIN："Finally"结束标志。

TCP连接建立过程：    
首先Client端发送连接请求报文，Server段接受连接后回复ACK报文，并为这次连接分配资源。Client端接收到ACK报文后也向Server段发生ACK报文，并分配资源，这样TCP连接就建立了。

TCP连接断开过程：  
假设Client端发起中断连接请求，也就是发送FIN报文。Server端接到FIN报文后，意思是说"<u>我Client端没有数据要发给你了</u>"，但是如果你还有数据没有发送完成，则不必急着关闭Socket，可以继续发送数据。所以你先发送ACK"<u>告诉Client端，你的请求我收到了，但是我还没准备好，请继续你等我的消息</u>"。这个时候Client端就进入FIN_WAIT状态，继续等待Server端的FIN报文。当Server端确定数据已发送完成，则向Client端发送FIN报文，"<u>告诉Client端，好了，我这边数据发完了，准备好关闭连接了</u>"。Client端收到FIN报文后，"<u>就知道可以关闭连接了，但是他还是不相信网络，怕Server端不知道要关闭，所以发送ACK后进入TIME_WAIT状态，如果Server端没有收到ACK则可以重传</u>“.Server端收到ACK后，"<u>就知道可以断开连接了</u>"。Client端等待了2MSL后依然没有收到回复，则证明Server端已正常关闭，那好，我Client端也可以关闭连接了。Ok，TCP连接就这样关闭了！

<i><font color="blue" size="4" >为什么要三次挥手？</font></i>  

在只有两次“握手”的情形下，假设Client想跟Server建立连接，但是却因为中途连接请求的数据报丢失了，故Client端不得不重新发送一遍；这个时候Server端仅收到一个连接请求，因此可以正常的建立连接。但是，有时候Client端重新发送请求不是因为数据报丢失了，而是有可能数据传输过程因为网络并发量很大在某结点被阻塞了，这种情形下Server端将先后收到2次请求，并持续等待两个Client请求向他发送数据...问题就在这里，Cient端实际上只有一次请求，而Server端却有2个响应，极端的情况可能由于Client端多次重新发送请求数据而导致Server端最后建立了N多个响应在等待，因而造成极大的资源浪费！所以，“三次握手”很有必要！

<i><font color="blue" size="4" >为什么要四次挥手？</font></i>

试想一下，假如现在你是客户端你想断开跟Server的所有连接该怎么做？第一步，你自己先停止向Server端发送数据，并等待Server的回复。但事情还没有完，虽然你自身不往Server发送数据了，但是因为你们之前已经建立好平等的连接了，所以此时他也有主动权向你发送数据；故Server端还得终止主动向你发送数据，并等待你的确认。其实，说白了就是保证双方的一个合约的完整执行！　　使用TCP的协议：FTP（文件传输协议）、Telnet（远程登录协议）、SMTP（简单邮件传输协议）、POP3（和SMTP相对，用于接收邮件）、HTTP协议等。
### 六、应用层　
DNS是域名系统(DomainNameSystem)的缩写，该系统用于命名组织到域层次结构中的计算机和网络服务，<font color="red" size="4" >可以简单地理解为将URL转换为IP地址。</font>域名是由圆点分开一串单词或缩写组成的，每一个域名都对应一个惟一的IP地址，在Internet上域名与IP地址之间是一一对应的，DNS就是进行域名解析的服务器。DNS命名用于Internet等TCP/IP网络中，通过用户友好的名称查找计算机和服务。
文件传送协议FTP (File Transfer Protocol) [RFC 959]是因特网上使用得最广泛的文件传送协议。
TCP/IP协议族中还有一个简单文件传送协议TFTP (Trivial File Transfer Protocol)，它是一个很小且易于实现的文件传送协议。
### 七，万维网
HTTP 协议：超文本传输协议（HTTP，HyperText Transfer Protocol)是互联网上应用最为广泛的一种网络协议。所有的WWW文件都必须遵守这个标准。　　
- HTTP 协议包括哪些请求？　　
- GET：请求读取由URL所标志的信息。　　
- POST：给服务器添加信息（如注释）。　　
- PUT：在给定的URL下存储一个文档。　　
- DELETE：删除给定的URL所标志的资源。　

　
HTTP 中， POST 与 GET 的区别　　
1）Get是从服务器上获取数据，Post是向服务器传送数据。　　
2）Get是把参数数据队列加到提交表单的Action属性所指向的URL中，值和表单内各个字段一一对应，在URL中可以看到。　　
3）Get传送的数据量小，不能大于2KB；Post传送的数据量较大，一般被默认为不受限制。　　
4）根据HTTP规范，GET用于信息获取，而且应该是安全的和幂等的。　　
- I. 所谓 安全的 意味着该操作用于获取信息而非修改信息。换句话说，GET请求一般不应产生副作用。就是说，它仅仅是获取资源信息，就像数据库查询一样，不会修改，增加数据，不会影响资源的状态。　　
- II. 幂等 的意味着对同一URL的多个请求应该返回同样的结果。







