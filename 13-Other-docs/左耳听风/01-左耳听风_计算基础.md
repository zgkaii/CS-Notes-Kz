## 程序员如何用技术变现

第一，**千里之行，积于跬步**。

第二，**关注有价值的东西**。

第三，**找到能体现自我价值的地方**。

第四，**动手能力很重要**。

第五，**关注技术付费点**。

第六，**提升自己的能力和经历**。

第七，**找到有价值的信息源**。

第八，**输出观点和价值观**。

第九，**朋友圈很重要**。

## 何为技术领导力

技术领导力是：

- 尊重技术，追求核心基础技术。
- 追逐自动化的高效率的工具和技术，同时避免无效率的组织架构和管理。
- 解放生产力，追逐人效的提高。
- 开发抽象和高质量的可以重用的技术组件。
- 坚持高于社会主流的技术标准和要求。

作为一个软件工程师怎样才算是拥有“技术领导力”呢？我个人认为，是有下面的这些特质。

- **能够发现问题**。能够发现现有方案的问题。
- **能够提供解决问题的思路和方案，并能比较这些方案的优缺点**。
- **能够做正确的技术决定**。用什么样的技术、什么解决方案、怎样实现来完成一个项目。
- **能够用更优雅，更简单，更容易的方式来解决问题**。
- **能够提高代码或软件的扩展性、重用性和可维护性**。
- **能够用正确的方式管理团队**。所谓正确的方式是，一方面是，让正确的人做正确的事，并发挥每个人的潜力；另一方面是，可以提高团队的生产力和人效，找到最有价值的需求，用最少的成本实现之。并且，可以不断地提高自身和团队的标准。
- **创新能力**。能够使用新的方法新的方式解决问题，追逐新的工具和技术。

## 如何拥有技术领导力

### 1、吃透基础技术。

**编程部分**

- **C 语言**：更接近底层。在具备跨平台能力的前提下，它可以比较容易地被人工翻译成相应的汇编代码。它的内存管理很直接，让程序员直接和内存地址打交道。《C 程序设计语言》第二版（K&R）。

- **编程范式**：各种编程语言都有它们各自的编程范式，用于解决各种问题。比如面向对象编程（C++、Java）、泛型编程（C++、Go、C#）、函数式编程（JavaScript、 Python、Lisp、Haskell、Erlang）等。

- **算法和数据结构**：算法（及其相应的数据结构）是程序设计的有力支撑。算法是编程中最最重要的东西，也是计算机科学中最重要的东西。

**系统部分**

- **计算机系统原理**：CPU 的体系结构（指令集 [CISC/RISC]、分支预测、缓存结构、总线、DMA、中断、陷阱、多任务、虚拟内存、虚拟化等），内存的原理与性能特点（SRAM、DRAM、DDR-SDRAM 等），磁盘的原理（机械硬盘 [盘面、磁头臂、磁头、启停区、寻道等]、固态硬盘 [页映射、块的合并与回收算法、TRIM 指令等]），GPU 的原理等。

推荐书籍《深入理解计算机系统》（Randal E. Bryant）。

- **操作系统原理和基础**：进程、进程管理、线程、线程调度、多核的缓存一致性、信号量、物理内存管理、虚拟内存管理、内存分配、文件系统、磁盘管理等。

推荐三本书《UNIX 环境高级编程》、《UNIX 网络编程》和《Windows 核心编程》。

- **网络基础**：计算机网络是现代计算机不可或缺的一部分。需要了解基本的网络层次结构（ISO/OSI 模型、TCP/IP 协议栈），包括物理层、数据链路层（包含错误重发机制）、网络层（包含路由机制）、传输层（包含连接保持机制）、会话层、表示层、应用层（在 TCP/IP 协议栈里，这三层可以并为一层）。

推荐书籍《TCP/IP 详解》。

- **数据库原理**：数据库管理系统是管理数据库的利器。

- **分布式技术架构**：数据库和应用程序服务器在应对互联网上数以亿计的访问量的时候，需要能进行横向扩展，才能提供足够的性能。为了做到这一点，要学习分布式技术架构，包括负载均衡、DNS 解析、多子域名、无状态应用层、缓存层、数据库分片、容错和恢复机制、Paxos、Map/Reduce 操作、分布式 SQL 数据库一致性（以 Google Cloud Spanner 为代表）等知识点。

**注意，上面这些基础知识通常不是可以速成的。虽然说，你可以在一两年内看完相关的书籍或论文，但是，我想说的是，这些基础技术是需要你用一生的时间来学习的，因为基础上的技术和知识，会随着阅历和经验的增加而有不同的感悟**。

### 2、提高学习能力。

所谓学习能力，就是能够很快地学习新技术，又能在关键技术上深入的能力。只有在掌握了上述的基础原理之上，你才能拥有好的学习能力。

- **学习的信息源**。信息源很重要，有好的信息源就可以更快速地获取有价值的信息，极大提升学习效率。常见的信息源有：Google 等搜索引擎，Stack Overflow、Quora 等社区，图书，API 文档，论文和博客等。

- **与高手交流**。程序员可以通过技术社区以及参加技术会议与高手交流，也可以通过参加开源项目来和高手切磋。常闻“听君一席话，胜读十年书”便是如此。与高手交流对程序员的学习和成长很有益处，不仅有助于了解热门的技术方向及关键的技术点，更可以通过观察和学习高手的技术思维及解决问题的方式，提高自己的技术前瞻性和技术决策力。

- **举一反三的思考**。比如，了解了操作系统的缓存和网页缓存以后，思考其相同点和不同点。了解了 C++ 语言的面向对象特性以后，思考 Java 面向对象的相同点和不同点。遇到故障的时候，举一反三，把同类问题一次性地处理掉。
- **不怕困难的态度**。遇到难点，有时不花一番力气，是不可能突破的。此时如果没有不怕困难的态度，就容易打退堂鼓。但如果能坚持住，多思考，多下功夫，往往就能找到出路。绝大多数人是害怕困难的，所以，如果你能够不怕困难，并可以找到解决困难的方法和路径，时间一长，你就能拥有别人所不能拥有的能力。
- **开放的心态**。实现一个目的通常有多种办法。带有开放的心态，不拘泥于一个平台、一种语言，往往能带来更多思考，也能得到更好的结果。而且，能在不同的方法和方案间做比较，比较它们的优缺点，那么你会知道在什么样的场景下用什么样的方案，你就会比一般人能够有更全面和更完整的思路。

### 3、坚持做正确的事。

做正确的事，比用正确的方式做事更重要，因为这样才始终会向目的地靠拢。

- **提高效率的事**。学习和掌握良好的时间管理方式，管理好自己的时间，能显著提高自己的效率。
- **自动化的事**。程序员要充分利用自己的职业特质，当看见有可以自动化的步骤时，编写程序来自动化操作，可以显著提高效率。
- **掌握前沿技术的事**。掌握前沿的技术，有利于拓展自己的眼界，也有利于找到更好的工作。
- **知识密集型的事**。知识密集型是相对于劳动密集型来说的。
- **技术驱动的事**。不仅是指用程序驱动的事，而且包括一切技术改变生活的事。比如自动驾驶、火星登陆等。

### 4、高标准要求自己。

只有不断地提高标准 ，你才可能越走越高，所以，要以高标准要求自己，不断地反思、总结和审视自己，才能够提升自己。

- **Google 的自我评分卡**。Google 的评分卡是在面试 Google 时，要求应聘人对自己的技能做出评估的工具，可以看出应聘人在各个领域的技术水平。我们可以参考 Google 的这个评分卡来给自己做评估，并通过它来不断地提高对自己的要求。（该评分卡见后附录）。
- **敏锐的技术嗅觉**。这是一个相对综合的能力，你需要充分利用信息源，GET 到新的技术动态，并通过参与技术社区的讨论，丰富自己了解技术的角度。
- **强调实践，学以致用**。学习知识，一定要实际用一用，可以是工作中的项目，也可以是自己的项目，不仅有利于吸收理解，更有利于深入到技术的本质。
- **Lead by Example**。永远在编程。不写代码，你就对技术细节不敏感，你无法做出可以实践的技术决定和方案。

然而，仅有技术还不够。作为一名合格的技术领导者，还需要有解决问题的各种软技能。比如，良好的沟通能力、组织能力、驱动力、团队协作能力等等。

推荐《技术领导之路》、《卓有成效的管理者》经典图书。

## 每个程序员都该知道的事

**每个程序员都应该要读的书**：[What is the single most influential book every programmer should read](https://stackoverflow.com/questions/1711/what-is-the-single-most-influential-book-every-programmer-should-read)

《代码大全》《程序员修练之道》《计算机的构造和解释》《算法导论》《设计模式》《重构》《人月神话》《代码整洁之道》

《Effective Java》《Unix 编程艺术》、《Unix 高级环境编程》...

**每个搞计算机专业的学生应有的知识**：[**What every computer science major should know**](http://matt.might.net/articles/what-cs-majors-should-know/)

作品集（Portfolio）会比简历（Resume）更有参考意义。

计算机专业工作者也要学会与人交流的技巧，包括如何写演示文稿，以及面对质疑时如何与人辩论的能力。

各个方面展开计算机专业人士所需要的硬技能：工程类数学、Unix 哲学和实践、系统管理、程序设计语言、离散数学、数据结构与算法、计算机体系结构、操作系统、网络、安全、密码学、软件测试、用户体验、可视化、并行计算、软件工程、形式化方法、图形学、机器人、人工智能、机器学习、数据库，等等。

**LinkedIn 高效的代码复查技巧**：[**LinkedIn’s Tips for Highly Effective Code Review**](https://thenewstack.io/linkedin-code-review/)

**编程语言和代码质量的研究报告**：[**A Large-Scale Study of Programming Languages and Code Quality in GitHub**](https://cacm.acm.org/magazines/2017/10/221326-a-large-scale-study-of-programming-languages-and-code-quality-in-github/fulltext)

## Go语言，Docker和新技术

第一，**语言简单，上手快**。

第二，**并行和异步编程几乎无痛点**。

第三，**Go 语言的 lib 库麻雀虽小五脏俱全**。

第四，**C 语言的理念和 Python 的姿态**。

## 如何成为一个大家愿意追随的Leader？

![img](https://static001.geekbang.org/resource/image/2d/ce/2dd368279b137d965d2591d4b2c166ce.jpg)

**帮人解问题**。

**被人所依赖**。

**赢得他人的信任**。

**开放的心态 + 倾向性的价值观**。

**Lead by Example**。

**保持热情和冲劲**。

**能够抓住重点，看透事物的本质**。

**描绘令人激动的方向，提供令人向住的环境**。

**甘当铺路石，为他人创造机会**。

## 程序中的错误处理：错误返回码和异常捕捉

- **资源的错误**。当我们的代码去请求一些资源时导致的错误，比如打开一个没有权限的文件，写文件时出现的写错误，发送文件到网络端发现网络故障的错误，等等。这一类错误属于程序运行环境的问题。对于这类错误，有的，我们可以处理，有的我们则无法处理。比如，内存耗尽、栈溢出或是一些程序运行时关键性资源不能满足时，我们只能停止运行，甚至退出整个程序。
- **程序的错误**。比如：空指针、非法参数等。这类是我们自己程序的错误，我们要记录下来，写入日志，最好触发监控系统报警。
- **用户的错误**。比如：Bad Request、Bad Format 等这类由用户的不合法输入带来的错误。这类错误基本上是在用户的 API 层上出现的问题。比如，解析一个 XML 或 JSon 文件，或是用户输入的字段不合法之类的。对于这类问题，我们需要向用户端报错，让用户自己处理修正他们的输入或操作。然后，我们正常执行，但是需要做统计，统计相应的错误率，这样有利我们改善软件或是侦测是否有恶意的用户请求。

这三类错误中，有些是我们希望杜绝发生的，比如程序的 Bug；有些则是我们杜绝不了的，比如用户的输入。而对于程序运行环境中的一些错误，则是我们希望可以恢复的。也就是说，我们希望可以通过重试或是妥协的方式来解决这些环境的问题，比如重建网络连接，重新打开一个新的文件。

可以这样来在逻辑上分类：

- 对于我们并不期望会发生的事，我们可以使用异常捕捉；
- 对于我们觉得可能会发生的事，使用返回码。

对于上面三种错误的种类来说，程序中的错误，可能用异常捕捉会比较合适；用户的错误，用返回码比较合适；而资源类的错误，要分情况，是用异常捕捉还是用返回值，要看这事是不应该出现的，还是经常出现的。

## 程序中的错误处理：异步编程和最佳实践

在异步编程的世界里，因为被调用的函数是被放到了另外一个线程里运行，这将导致：

- **无法使用返回码**。因为函数在被异步运行中，所谓的返回只是把处理权交给下一条指令，而不是把函数运行完的结果返回。**所以，函数返回的语义完全变了，返回码也没有用了**。

- **无法使用抛异常的方式**。因为除了上述的函数立马返回的原因之外，抛出的异常也在另外一个线程中，不同线程中的栈是完全不一样的，所以主线程的 `catch` 完全看不到另外一个线程中的异常。

### Java 异步编程的 Promise 模式

在 Java 中，在 JDK 1.8 里也引入了类 JavaScript 的玩法 —— `CompletableFuture`。这个类提供了大量的异步编程中 Promise 的各种方式。下面例举几个。

链式处理：

```Java
CompletableFuture.supplyAsync(this::findReceiver)
                 .thenApply(this::sendMsg)
                 .thenAccept(this::notify);
```

上面的这个链式处理和 JavaScript 中的`then()`方法很像，其中的
`supplyAsync()` 表示执行一个异步方法，而 `thenApply()` 表示执行成功后再串联另外一个异步方法，最后是 `thenAccept()` 来处理最终结果。

下面这个例子是，合并两个异步函数的结果成一个的示例：

```Java
String result = CompletableFuture.supplyAsync(() -> {
         return "hello";
     }).thenCombine(CompletableFuture.supplyAsync(() -> {
         return "world";
     }), (s1, s2) -> s1 + " " + s2).join());
System.out.println(result);
 
```

接下来，我们再来看一下，Java 这个类相关的异常处理：

```Java
CompletableFuture.supplyAsync(Integer::parseInt) // 输入: "ILLEGAL"
			     .thenApply(r -> r * 2 * Math.PI)
			     .thenApply(s -> "apply>> " + s)
			     .exceptionally(ex -> "Error: " + ex.getMessage());
```

我们要注意到上面代码里的 `exceptionally()` 方法，这个和 JavaScript Promise 中的 `catch()` 方法相似。

运行上面的代码，会出现如下输出：

```Java
Error: java.lang.NumberFormatException: For input string: "ILLEGAL"
```

也可以这样：

```Java
CompletableFuture.supplyAsync(Integer::parseInt) // 输入: "ILLEGAL"
				 .thenApply(r -> r * 2 * Math.PI)
				 .thenApply(s -> "apply>> " + s)
				 .handle((result, ex) -> {
				 	if (result != null) {
				 		return result;
				 	} else {
				 		return "Error handling: " + ex.getMessage();
				 	}
				 });
```

上面代码中，你可以看到，其使用了 `handle()` 方法来处理最终的结果，其中包含了异步函数中的错误处理。

### 错误处理的最佳实践

- **统一分类的错误字典**。无论你是使用错误码还是异常捕捉，都需要认真并统一地做好错误的分类。最好是在一个地方定义相关的错误。比如，HTTP 的 4XX 表示客户端有问题，5XX 则表示服务端有问题。也就是说，你要建立一个错误字典。
- **同类错误的定义最好是可以扩展的**。这一点非常重要，而对于这一点，通过面向对象的继承或是像 Go 语言那样的接口多态可以很好地做到。这样可以方便地重用已有的代码。
- **定义错误的严重程度**。比如，Fatal 表示重大错误，Error 表示资源或需求得不到满足，Warning 表示并不一定是个错误但还是需要引起注意，Info 表示不是错误只是一个信息，Debug 表示这是给内部开发人员用于调试程序的。
- **错误日志的输出最好使用错误码，而不是错误信息**。打印错误日志的时候，除了要用统一的格式，最好不要用错误信息，而使用相应的错误码，错误码不一定是数字，也可以是一个能从错误字典里找到的一个唯一的可以让人读懂的关键字。这样，会非常有利于日志分析软件进行自动化监控，而不是要从错误信息中做语义分析。比如：HTTP 的日志中就会有 HTTP 的返回码，如：`404`。但我更推荐使用像`PageNotFound`这样的标识，这样人和机器都很容易处理。
- **忽略错误最好有日志**。不然会给维护带来很大的麻烦。
- **对于同一个地方不停的报错，最好不要都打到日志里**。不然这样会导致其它日志被淹没了，也会导致日志文件太大，最好的实践是，打出一个错误以及出现的次数。
- **不要用错误处理逻辑来处理业务逻辑**。也就是说，不要使用异常捕捉这样的方式来处理业务逻辑，而是应该用条件判断。如果一个逻辑控制可以用 if - else 清楚地表达，非常不建议使用异常方式处理。异常捕捉是用来处理不期望发生的事的，而错误码则用来处理可能会发生的事。
- **对于同类的错误处理，用一样的模式**。比如，对于`null`对象的错误，要么都用返回 null，加上条件检查的模式，要么都用抛 NullPointerException 的方式处理。不要混用，这样有助于代码规范。
- **尽可能在错误发生的地方处理错误**。因为这样会让调用者变得更简单。
- **向上尽可能地返回原始的错误**。如果一定要把错误返回到更高层去处理，那么，应该返回原始的错误，而不是重新发明一个错误。
- **处理错误时，总是要清理已分配的资源**。这点非常关键，使用 RAII 技术，或是 try-catch-finally，或是 Go 的 defer 都可以容易地做到。
- **不推荐在循环体里处理错误**。这里说的更多的情况是对于 try-catch 这种情况，对于绝大多数的情况你不需要这样做。最好把整个循环体外放在 try 语句块内，而在外面做 catch。
- **不要把大量的代码都放在一个 try 语句块内**。一个 try 语句块内的语句应该是完成一个简单单一的事情。
- **为你的错误定义提供清楚的文档以及每种错误的代码示例**。如果你是做 RESTful API 方面的，使用 Swagger 会帮你很容易搞定这个事。
- **对于异步的方式，推荐使用 Promise 模式处理错误**。对于这一点，JavaScript 中有很好的实践。
- **对于分布式的系统，推荐使用 APM 相关的软件**。尤其是使用 Zipkin 这样的服务调用跟踪的分析来关联错误。